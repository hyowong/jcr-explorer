<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:jee="http://www.springframework.org/schema/jee" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd   http://www.springframework.org/schema/context   http://www.springframework.org/schema/context/spring-context-3.0.xsd   http://www.springframework.org/schema/aop   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd   http://www.springframework.org/schema/jee   http://www.springframework.org/schema/jee/spring-jee-3.0.xsd   http://www.springframework.org/schema/tx   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

	<bean id="jackrabbit.repository.path" class="java.lang.String">
		<constructor-arg index="0" value="file:D:/Projects/enterprise_framework/newjcr" />
	</bean>
	<bean id="jcrManager" class="org.jcrexplorer.core.JCRManager" >
		<property name="repoPath" ref="jackrabbit.repository.path" />
	</bean>
	
	
  <bean id="jcr-repository" class="org.springmodules.jcr.jackrabbit.RepositoryFactoryBean">
		<!-- normal factory beans params -->
    <property name="configuration" value="classpath:repo-test-config.xml" />
    <property name="homeDir" ref="jackrabbit.repository.path" />
  </bean>
  
  <bean id="sessionFactory" class="org.springmodules.jcr.JcrSessionFactory">
    <property name="repository" ref="jcr-repository" />
    <property name="credentials">
      <bean class="javax.jcr.SimpleCredentials">
        <constructor-arg index="0" value="admin" />
				<!-- create the credentials using a bean factory -->
        <constructor-arg index="1">
          <bean factory-bean="password" factory-method="toCharArray" />
        </constructor-arg>
      </bean>
    </property>
  </bean>

	<!-- create the password to return it as a char[] -->
  <bean id="password" class="java.lang.String">
    <constructor-arg index="0" value="admin" />
  </bean>

  <bean id="jcrTemplate" class="org.springmodules.jcr.JcrTemplate">
    <property name="sessionFactory" ref="sessionFactory" />
    <property name="allowCreate" value="true" />
  </bean>
  
	

</beans>
